'use strict';

var threadTemplate = require('../templates/thread');

module.exports = function (req, res) {
  res.header('Content-Type', 'text/html');
  // hard-coded test data for now
  var props = {
    thread : {"data":{"_id":"54ac032b7ce3890000c88228","created":1420559147538,"path":"","title":"Project Euler","content":"[This](https://projecteuler.net) is Project Euler and you have probably already seen it","_author":{"_id":"54ac02337ce3890000c88225","username":"Jared"},"__v":2,"_w":0,"parentId":null,"deleted":false,"points":2,"downvotes":[],"upvotes":["54ac02337ce3890000c88225","54ac02577ce3890000c88227"],"depth":0,"id":"54ac032b7ce3890000c88228","children":[{"_id":"54ac145310bb1f00006f441a","created":1420563539252,"path":",54ac032b7ce3890000c88228","title":"mah fran key","content":"`567360_2e43586697bdcf5531fc69cbee08906b`","_author":{"_id":"54ac02577ce3890000c88227","username":"Vince"},"__v":1,"_w":0,"parentId":"54ac032b7ce3890000c88228","deleted":false,"points":1,"downvotes":[],"upvotes":["54ac02337ce3890000c88225"],"depth":1,"id":"54ac145310bb1f00006f441a","children":[{"_id":"54ac148110bb1f00006f441b","created":1420563585299,"path":",54ac032b7ce3890000c88228,54ac145310bb1f00006f441a","title":"test","content":"`some code`","_author":{"_id":"54ac02337ce3890000c88225","username":"Jared"},"__v":0,"_w":0,"parentId":"54ac145310bb1f00006f441a","deleted":false,"points":0,"downvotes":[],"upvotes":[],"depth":2,"id":"54ac148110bb1f00006f441b","children":[{"_id":"54ac17c910bb1f00006f441c","created":1420564425775,"path":",54ac032b7ce3890000c88228,54ac145310bb1f00006f441a,54ac148110bb1f00006f441b","title":"another test","content":"`did this solve the issue`","_author":{"_id":"54ac02337ce3890000c88225","username":"Jared"},"__v":0,"_w":0,"parentId":"54ac148110bb1f00006f441b","deleted":false,"points":0,"downvotes":[],"upvotes":[],"depth":3,"id":"54ac17c910bb1f00006f441c","children":[{"_id":"54ac29d310bb1f00006f441d","created":1420569043487,"path":",54ac032b7ce3890000c88228,54ac145310bb1f00006f441a,54ac148110bb1f00006f441b,54ac17c910bb1f00006f441c","title":"yes","content":"it did--*awesome*","_author":{"_id":"54ac02337ce3890000c88225","username":"Jared"},"__v":0,"_w":0,"parentId":"54ac17c910bb1f00006f441c","deleted":false,"points":0,"downvotes":[],"upvotes":[],"depth":4,"id":"54ac29d310bb1f00006f441d"}]}]}]},{"_id":"54ac138010bb1f00006f4419","created":1420563328553,"path":",54ac032b7ce3890000c88228","title":"my friend key","content":"It's `719801_8ad4f102ea7042645468bf14585162d4`","_author":{"_id":"54ac02337ce3890000c88225","username":"Jared"},"__v":0,"_w":0,"parentId":"54ac032b7ce3890000c88228","deleted":false,"points":0,"downvotes":[],"upvotes":[],"depth":1,"id":"54ac138010bb1f00006f4419"},{"_id":"54ac05637ce3890000c88229","created":1420559715777,"path":",54ac032b7ce3890000c88228","title":"another thing","content":"some more interesting context...","_author":{"_id":"54ac02337ce3890000c88225","username":"Jared"},"__v":0,"_w":0,"parentId":"54ac032b7ce3890000c88228","deleted":false,"points":0,"downvotes":[],"upvotes":[],"depth":1,"id":"54ac05637ce3890000c88229"},{"_id":"54ac0c5a10bb1f00006f4417","created":1420561498416,"path":",54ac032b7ce3890000c88228","title":"XSS test","content":"<script>console.log('test')</script>","_author":{"_id":"54ac02337ce3890000c88225","username":"Jared"},"__v":1,"_w":0,"parentId":"54ac032b7ce3890000c88228","deleted":false,"points":-1,"downvotes":["54ac02337ce3890000c88225"],"upvotes":[],"depth":1,"id":"54ac0c5a10bb1f00006f4417","children":[{"_id":"54ac0ccf10bb1f00006f4418","created":1420561615023,"path":",54ac032b7ce3890000c88228,54ac0c5a10bb1f00006f4417","title":"ha!","content":"[marked](https://www.npmjs.com/package/marked) sanitized out your XSS","_author":{"_id":"54ac02337ce3890000c88225","username":"Jared"},"__v":1,"_w":0,"parentId":"54ac0c5a10bb1f00006f4417","deleted":false,"points":1,"downvotes":[],"upvotes":["54ac02337ce3890000c88225"],"depth":2,"id":"54ac0ccf10bb1f00006f4418"},{"_id":"54ac34e60d2db20000c13569","created":1420571878765,"path":",54ac032b7ce3890000c88228,54ac0c5a10bb1f00006f4417","title":"test","content":"Submit","_author":{"_id":"54ac02337ce3890000c88225","username":"Jared"},"__v":0,"_w":0,"parentId":"54ac0c5a10bb1f00006f4417","deleted":false,"points":0,"downvotes":[],"upvotes":[],"depth":2,"id":"54ac34e60d2db20000c13569","children":[{"_id":"54ac35120d2db20000c1356a","created":1420571922833,"path":",54ac032b7ce3890000c88228,54ac0c5a10bb1f00006f4417,54ac34e60d2db20000c13569","content":"test2 `console.error('test')`","_author":{"_id":"54ac02337ce3890000c88225","username":"Jared"},"__v":0,"_w":0,"parentId":"54ac34e60d2db20000c13569","deleted":false,"points":0,"downvotes":[],"upvotes":[],"depth":3,"id":"54ac35120d2db20000c1356a"}]}]}]},"loggedIn":false}
  };

  res.send(threadTemplate(props));
};
